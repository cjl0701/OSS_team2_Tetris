#include "Header.h"
#include "Cursor.h"
#include "GameProgress.h"
#include "GameStatus.h"
#include "Show.h"
#include "MoveBlock.h"

int board[BOARD_HEIGHT + 1][BOARD_WIDTH + 2] = { 0, };
//2차원 배열로 테트리스 블록을 구현
int block[][4][4] = { //cjl:4x4 2차원 배열로 도형표시-> 2차원 배열의 배열->3차원 배열
   /*■
   ■■■*/
   {
	{ 0,0,0,0 },
	{ 1,0,0,0 },
	{ 1,1,1,0 },
	{ 0,0,0,0 } },

   {
	{ 0,0,1,0 },
	{ 0,0,1,0 },
	{ 0,1,1,0 },
	{ 0,0,0,0 } },

   {
	{ 1,1,1,0 },
	{ 0,0,1,0 },
	{ 0,0,0,0 },
	{ 0,0,0,0 } },

   {
	{ 1,1,0,0 },
	{ 1,0,0,0 },
	{ 1,0,0,0 },
	{ 0,0,0,0 } },

	/* 두 번째 블록
	   ■
	   ■■■     */

	{
	 { 0, 0, 0, 0 },
	 { 0, 0, 1, 0 },
	 { 1, 1, 1, 0 },
	 { 0, 0, 0, 0 } },

	{
	 { 0, 1, 1, 0 },
	 { 0, 0, 1, 0 },
	 { 0, 0, 1, 0 },
	 { 0, 0, 0, 0 } },

	{
	 { 1, 1, 1, 0 },
	 { 1, 0, 0, 0 },
	 { 0, 0, 0, 0 },
	 { 0, 0, 0, 0 } },

	{
	 { 1, 0, 0, 0 },
	 { 1, 0, 0, 0 },
	 { 1, 1, 0, 0 },
	 { 0, 0, 0, 0 } },

	 /* 세 번째 블록
	 ■
	 ■■■    */
	  {
	  { 0, 0, 0, 0 },
	  { 0, 1, 0, 0 },
	  { 1, 1, 1, 0 },
	  { 0, 0, 0, 0 } },

	  {
	  { 0, 0, 0, 0 },
	  { 0, 1, 0, 0 },
	  { 1, 1, 0, 0 },
	  { 0, 1, 0, 0 } },

	  {
	  { 0, 0, 0, 0 },
	  { 0, 0, 0, 0 },
	  { 1, 1, 1, 0 },
	  { 0, 1, 0, 0 } },

	  {
	  { 0, 0, 0, 0 },
	  { 0, 1, 0, 0 },
	  { 0, 1, 1, 0 },
	  { 0, 1, 0, 0 } },

	  /* 네 번째 블록
		 ■■■■   */
		 {
		 { 0, 1, 0, 0 },
		 { 0, 1, 0, 0 },
		 { 0, 1, 0, 0 },
		 { 0, 1, 0, 0 } },

		 {
		 { 0, 0, 0, 0 },
		 { 0, 0, 0, 0 },
		 { 1, 1, 1, 1 },
		 { 0, 0, 0, 0 } },

		 {
		 { 0, 1, 0, 0 },
		 { 0, 1, 0, 0 },
		 { 0, 1, 0, 0 },
		 { 0, 1, 0, 0 } },

		 {
		 { 0, 0, 0, 0 },
		 { 0, 0, 0, 0 },
		 { 1, 1, 1, 1 },
		 { 0, 0, 0, 0 } },

		 /* 다섯 번째 블록
			■■
			■■      */
			{
			{ 1, 1, 0, 0 },
			{ 1, 1, 0, 0 },
			{ 0, 0, 0, 0 },
			{ 0, 0, 0, 0 } },

			{
			{ 1, 1, 0, 0 },
			{ 1, 1, 0, 0 },
			{ 0, 0, 0, 0 },
			{ 0, 0, 0, 0 } },

			{
			{ 1, 1, 0, 0 },
			{ 1, 1, 0, 0 },
			{ 0, 0, 0, 0 },
			{ 0, 0, 0, 0 } },

			{
			{ 1, 1, 0, 0 },
			{ 1, 1, 0, 0 },
			{ 0, 0, 0, 0 },
			{ 0, 0, 0, 0 } },

			/* 여섯 번째 블록
			   ■■
			  ■■      */
			{
			{ 0, 0, 0, 0 },
			{ 0, 1, 1, 0 },
			{ 1, 1, 0, 0 },
			{ 0, 0, 0, 0 } },

			{
			 { 0, 1, 0, 0 },
			 { 0, 1, 1, 0 },
			 { 0, 0, 1, 0 },
			 { 0, 0, 0, 0 } },

			{
			 { 0, 0, 0, 0 },
			 { 0, 1, 1, 0 },
			 { 1, 1, 0, 0 },
			 { 0, 0, 0, 0 } },

			{
			 { 0, 1, 0, 0 },
			 { 0, 1, 1, 0 },
			 { 0, 0, 1, 0 },
			 { 0, 0, 0, 0 } },

			 /* 일곱 번째 블록
				■■
				 ■■    */
				{
				 { 0, 0, 0, 0 },
				 { 1, 1, 0, 0 },
				 { 0, 1, 1, 0 },
				 { 0, 0, 0, 0 } },

				{
				 { 0, 0, 1, 0 },
				 { 0, 1, 1, 0 },
				 { 0, 1, 0, 0 },
				 { 0, 0, 0, 0 } },

				{
				 { 0, 0, 0, 0 },
				 { 1, 1, 0, 0 },
				 { 0, 1, 1, 0 },
				 { 0, 0, 0, 0 } },

				{
				 { 0, 0, 1, 0 },
				 { 0, 1, 1, 0 },
				 { 0, 1, 0, 0 },
				 { 0, 0, 0, 0 } },

};

int main()
{
	int score = 0; //게임점수
	int speed = 200;
	int level = 1; //게임레벨
	RemoveCursor(); //커서 깜박이 제거
	setCursor(2, 1); //보드표시 시작위치 설정
	ShowBoard(); //보드 출력
	ScoreLevel(&level, &score);
	moveBlock(&speed, &level, &score); //보드 출력 움직임
	(void)getchar();
}